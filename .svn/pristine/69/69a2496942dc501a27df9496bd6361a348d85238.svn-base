{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\home\\controller\\report.js"
    ],
    "names": [
        "mgr",
        "mgm",
        "indexAction",
        "display",
        "downloadAction",
        "orderId",
        "get",
        "console",
        "log",
        "userId",
        "cookie",
        "downLoadPill",
        "then",
        "result",
        "error",
        "pm",
        "pillinfor",
        "receipt",
        "pillinfor1",
        "JSON",
        "parse",
        "fphm",
        "filename",
        "address",
        "__filename",
        "filePath",
        "download",
        "queryAction",
        "queryOrder",
        "assign",
        "testList",
        "length",
        "sendDate",
        "sendDate1",
        "substring",
        "testList1",
        "Array",
        "push",
        "j",
        "billAction",
        "infor",
        "testItem",
        "aa",
        "split",
        "testItemName",
        "getPersonCurrentPrice",
        "code",
        "pp",
        "price",
        "getCurrentPrice",
        "itemId",
        "gp",
        "minprice",
        "pp1",
        "gp1",
        "price1",
        "minprice1",
        "pp2",
        "gp2",
        "price2",
        "minprice2",
        "priceTatol",
        "minpriceTatol",
        "recvAddress",
        "reptReceiver_1",
        "reptReceiver",
        "reptReceiver_2",
        "encodeURIComponent"
    ],
    "mappings": "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",
    "file": "..\\..\\..\\src\\home\\controller\\report.js",
    "sourcesContent": [
        "'use strict';\r\n\r\nimport Base from './base.js';\r\nimport UserMgr from '../connect/usermgr.js';\r\nimport BizMgr from '../connect/bizmgr.js';\r\n\r\n\r\nvar mgr = new UserMgr();\r\n//-------------------------------\r\nvar mgm = new BizMgr();\r\n\r\n\r\nexport default class extends Base {\r\n\r\n\tasync indexAction(){\r\n\t \treturn this.display();\r\n\t }\r\n\r\n\r\n\r\n\t async  downloadAction(){\r\n\t \t\ttry{\r\n\r\n\t \t\t\tlet orderId = this.get(\"orderId\");\r\n\r\n\t \t\t\tconsole.log(orderId);\r\n\t \t\t\tlet userId = this.cookie(\"userId\");\r\n\t \t\t\r\n\t \t\t\tlet pm = await mgm.downLoadPill(userId,orderId)\r\n\t \t\t\t.then(function(result){\r\n\r\n\t \t\t\t\tconsole.log(result);\r\n\t \t\t\t\treturn result;\r\n\t \t\t\t},function(error){\r\n\r\n\t \t\t\t})\r\n\t \t\t\tlet pillinfor = pm.receipt;\r\n\t \t\t\tconsole.log(typeof pillinfor);\r\n\t \t\t\tvar pillinfor1 = JSON.parse(pillinfor);\r\n\t \t\t\tconsole.log(typeof pillinfor1);\r\n\r\n\t \t\t\tconsole.log(pillinfor1[0].fphm);\r\n\t \t\t\t//var pillinfor2 =JSON.stringify(pillinfor1);\r\n\t \t\t\t//console.log(pillinfor[2]);\r\n\t \t\t\r\n\t \t\tconsole.log(pillinfor1[0].fphm);\r\n\t \t\t//var filename = 'user.js';\r\n\t \t\t\t\r\n\t \t\t\t//var address = 'C://Users//Administrator//Desktop//test//';\r\n\t \t\t\t//var address = 'C://Users//Administrator//Desktop//fdmweb22//fdmweb//src//home//controller//'\r\n\t \t\t\tvar filename =  pillinfor1[0].fphm+ '_personal.pdf';\r\n\r\n\t \t\t\t//var filename1 =  pillinfor1[0].fphm+ '.pdf';\r\n\t \t\t\t/*var test = 'jcltest';\r\n\t \t\t\tvar filename = test+'_个人.pdf' ;\r\n\t \t\t\tvar filename1 = test+'.pdf' ;*/\r\n\t \t\t\t\r\n\t \t\t\t//var filename = '16359593_个人.pdf' ;\r\n\t \t\t\t//var filename = '11.txt' ;\r\n\t \t\t\t//var filename = '16359582.pdf' ;\r\n\t \t\t\t//var address = '//fp//'\r\n\t \t\t\tvar address = '/fp1/';\r\n\r\n\r\n\t \t\t\tvar __filename = address+filename;\r\n\r\n\r\n\t \t\r\n\r\n\r\n\t \t\t\tlet filePath = __filename;\r\n\t \t\t\t\r\n\t \t\t\tthis.download(filePath);\r\n\t \t\t}catch(e){\r\n\t \t\t\t\treturn this.error(\"没有发票信息\");\r\n\t \t\t}\r\n\t \t\t\r\n\t }\r\n\r\n\t \r\n\t async queryAction(){\r\n\t \t//这个是删除map的操作\r\n\r\n\r\n\r\n\t \ttry{\r\n\t \t\tlet userId = this.cookie(\"userId\");\r\n\t \t\tconsole.log(\"========queryAction============\");\r\n\t \t\tconsole.log(userId)\r\n\t \t\tlet pm = await mgm.queryOrder(userId)\r\n\t \t\t.then(function(result){\r\n\r\n\t \t\t\tconsole.log(result);\r\n\t \t\t\treturn result;\r\n\t \t\t},function(error){\r\n\t \t\t\tconsole.log(error);\r\n\t \t\t})\r\n\r\n\t \t\t//console.log(pm);\r\n\t \t\t//console.log(pm.testList);\r\n\t \t\tthis.assign(\"pm\",pm);\r\n\t \t\t//for(let j in pm){\r\n      //var elm = pm.testList;\r\n     // console.log(elm.userId + \"|\" + elm.name + \"|\" + elm.password); \r\n     // this.assign('elm',elm);\r\n\r\n     \tconsole.log(\"====pm==========\");\r\n      \tconsole.log(pm);\r\n      \tconsole.log(pm.testList.length);\r\n      \tconsole.log(pm.testList.sendDate);\r\n      \t\r\n\r\n\r\n      \tif(pm.testList.length==null){\r\n      \t\tconsole.log(\"一条订单的时候\");\r\n      \t\t//console.log(pm.testList);\r\n      \t\tlet sendDate1 = pm.testList.sendDate.substring(0,10);\r\n      \t\tlet testList1 = new Array();\r\n      \t\ttestList1.push(sendDate1);\r\n      \t\tthis.assign(\"sendDate\",sendDate1);\r\n      \t\tthis.assign('testList1',pm.testList);\r\n\r\n      \t}else{\r\n      \t\tlet testList1 = new Array();\r\n      \tfor(let j in pm.testList){\r\n      \t\tlet sendDate = pm.testList[j].sendDate.substring(0,10);\r\n      \t\ttestList1.push(sendDate);\r\n      \t\t\r\n      \t}\r\n      \tconsole.log(testList1);\r\n      \tthis.assign(\"sendDate\",testList1);\r\n      \tthis.assign('testList',pm.testList);\r\n      \t}\r\n     \r\n      //this.assign('testList',pm.testList.phoneNumber);\r\n   // }\r\n\t \t\t//this.assign(\"pm\",pm);\r\n\r\n\t \t}catch(e){\r\n\r\n\t \t}\r\n\r\n\r\n\t \treturn this.display();\r\n\t }\r\n\r\n\r\n\t async billAction(){\r\n\t \tconsole.log(\"=====billAction=========\");\r\n\t \tvar infor = this.get();\r\n\t \tvar userId = this.cookie('userId');\r\n\r\n\t \tconsole.log(infor.testItem);\r\n\t \tvar testItem = infor.testItem;\r\n\t \tvar aa  = testItem.split(\",\");\r\n\t \tconsole.log(aa);\r\n\t \tconsole.log(aa.length);\r\n\t \tvar testItemName=[\"FD-Tissue-180\",\"FD-ctDNA-180\",\"FD-Tissue-600\",\"FD-ctDNA-600\",\"FD-Exome\",\"FD-ctDNA-Exome\",\r\n\t \t\"FD-Tissue-RNA\",\"FD-Tissue-180+FD-ctDNA-180\",\"FD-Tissue-600+FD-ctDNA-600\"]\r\n\t \tthis.assign('itemName1',testItemName[aa[0]-1]);\r\n\t \tthis.assign('itemName1Num',aa[1]);\r\n\t \tthis.assign('itemName2',testItemName[aa[2]-1]);\r\n\t \tthis.assign('itemName2Num',aa[3]);\r\n\t \tthis.assign('itemName3',testItemName[aa[4]-1]);\r\n\t \tthis.assign('itemName3Num',aa[5]);\r\n\t \tconsole.log(aa[0]);\r\n\t \tconsole.log(testItemName[aa[0]-1]);\r\n\t \tconsole.log(aa[1]);\r\n\t \tconsole.log(testItemName[aa[2]-1]);\r\n\t \tconsole.log(aa[3]);\r\n\t \tconsole.log(testItemName[aa[4]-1]);\r\n\t \tconsole.log(aa[5]);\r\n\r\n\r\n\t \t try{\r\n\t \t \t//可能过期的价格或者没过期的价格\r\n\t let pp = await mgm.getPersonCurrentPrice(userId,aa[0], infor.code)\r\n\r\n\t .then(function(result){\r\n\r\n\t \tconsole.log(\"=========ppp=========\");\r\n\r\n\t \tconsole.log(result);\r\n\t \treturn result;\r\n\t })\r\n\t console.log(pp.price);\r\n\r\n\r\n\r\n\t //10个A的价格\t \t\r\n      let gp=await mgm.getCurrentPrice(aa[0], 'AAAAAAAAAA')\r\n    .then(function (result){\r\n      console.log(result.itemId+result.price+\"----------------\");\r\n      //\r\n      console.log(\"-----------------\")\r\n      \r\n     \r\n      \r\n      return result;\r\n\r\n    });\r\n   // console.log(gp);\r\n   // this.assign('price',gp);\r\n\r\n\r\n   console.log(gp.price);\r\n\r\n     var  price =  gp.price;\r\n   var  minprice = pp.price<gp.price?pp.price:gp.price;\r\n\r\n   console.log(price);\r\n    }\r\n    \r\n    catch(e){\r\n\r\n    }\r\n    if(aa[2]!=null){\r\n\r\n    \ttry{\r\n\r\n    //可能过期的价格或者没过期的价格\r\n\t let pp1 = await mgm.getPersonCurrentPrice(userId,aa[2], infor.code)\r\n\r\n\t .then(function(result){\r\n\r\n\t \tconsole.log(\"=========ppp=========\");\r\n\r\n\t \tconsole.log(result);\r\n\t \treturn result;\r\n\t })\r\n\t console.log(pp1.price);\r\n\r\n\r\n\r\n\r\n      let gp1=await mgm.getCurrentPrice(aa[2], 'AAAAAAAAAA')\r\n    .then(function (result){\r\n      console.log(result.itemId+result.price+\"----------------\");\r\n      //\r\n      console.log(\"-----------------\")\r\n      \r\n     \r\n      \r\n      return result;\r\n\r\n    });\r\n    console.log(gp1);\r\n   // this.assign('price',gp);\r\n\r\n   var  price1 =  gp1.price;\r\n   var  minprice1 = pp1.price<gp1.price?pp1.price:gp1.price;\r\n\r\n   console.log(price1);\r\n    }\r\n    \r\n    catch(e){\r\n\r\n    }\r\n\r\n\r\n    }\r\n     if(aa[4]!=null){\r\n\r\n    \ttry{\r\n\r\n\r\n     //可能过期的价格或者没过期的价格\r\n\t let pp2 = await mgm.getPersonCurrentPrice(userId,aa[4], infor.code)\r\n\r\n\t .then(function(result){\r\n\r\n\t \tconsole.log(\"=========ppp=========\");\r\n\r\n\t \tconsole.log(result);\r\n\t \treturn result;\r\n\t })\r\n\t console.log(pp2.price);\r\n\r\n\r\n\r\n      let gp2=await mgm.getCurrentPrice(aa[4], 'AAAAAAAAAA')\r\n    .then(function (result){\r\n      console.log(result.itemId+result.price+\"----------------\");\r\n      //\r\n      console.log(\"-----------------\")\r\n      \r\n     \r\n      \r\n      return result;\r\n\r\n    });\r\n    console.log(gp2);\r\n   // this.assign('price',gp);\r\n   var  price2 =  gp2.price;\r\n\r\n   var  minprice2 = pp2.price<gp2.price?pp2.price:gp2.price;\r\n\r\n   console.log(price2);\r\n    }\r\n    \r\n    catch(e){\r\n\r\n    }\r\n\r\n\r\n    }\r\n\r\n    console.log(price1)\r\n\r\n    var priceTatol = price*aa[1];\r\n\r\n    var minpriceTatol = minprice*aa[1];\r\n\r\n    if(price1 != null){\r\n\r\n    \tpriceTatol = priceTatol+price1*aa[3];\r\n\r\n    \tminpriceTatol = minpriceTatol+minprice1*aa[3];\r\n    }\r\n\r\n    if(price2 != null){\r\n    \tpriceTatol = priceTatol+price2*aa[5];\r\n\r\n    \tminpriceTatol = minpriceTatol+minprice2*aa[5];\r\n    }\r\n\r\n    console.log(minpriceTatol);\r\n    this.assign(\"priceTatol\",priceTatol);\r\n    this.assign(\"minpriceTatol\",minpriceTatol);\r\n\r\n    console.log(priceTatol);\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \tconsole.log(\"==========infor==========\")\r\n    \tconsole.log(infor);\r\n\t \tthis.assign(\"inforbill\",infor);\r\n\r\n\r\n\t \tconsole.log(infor.recvAddress);\r\n\t \tlet reptReceiver_1 = infor.reptReceiver;\r\n\t \tlet reptReceiver_2 = encodeURIComponent(reptReceiver_1);\r\n\t \tconsole.log(reptReceiver_2);\r\n\t \tthis.assign(\"reptReceiver\",reptReceiver_2);\r\n\r\n\r\n\r\n\t \tvar  sendDate = infor.sendDate;\r\n  \t\t\t\r\n\r\n   \t\tvar sendDate1 = sendDate.substring(0,10);\r\n\r\n   \t\tthis.assign(\"sendDate1\",sendDate1);\r\n   \t\t\r\n\r\n\t \treturn this.display();\r\n\r\n\t }\r\n}"
    ]
}