{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\home\\connect\\usermgr.js"
    ],
    "names": [
        "userMap",
        "md5",
        "require",
        "serverUrl",
        "addUser",
        "senderId",
        "username",
        "password",
        "phone",
        "email",
        "realName",
        "userRole",
        "user",
        "get",
        "hashpwd",
        "hash",
        "path",
        "secToken",
        "updatePath",
        "sendRequest",
        "localError",
        "updateUserInfor",
        "infor",
        "cardId",
        "disabled",
        "code",
        "console",
        "log",
        "userId",
        "name",
        "phoneTest",
        "phoneNum",
        "login",
        "createUser",
        "name1",
        "encodeURIComponent",
        "realName1",
        "updateUser",
        "vCode",
        "updatePassword",
        "deleteUser",
        "disableUser",
        "flag",
        "getUser",
        "sendShortMsgCode",
        "type",
        "key",
        "verificationCode",
        "getUserList",
        "setUser",
        "userInfo",
        "set",
        "u",
        "data",
        "hs",
        "sbhash",
        "substring",
        "resv",
        "i",
        "length",
        "charAt"
    ],
    "mappings": "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",
    "file": "..\\..\\..\\src\\home\\connect\\usermgr.js",
    "sourcesContent": [
        "'use strict';\r\n\r\nimport ConnBase from './connbase.js';\r\n\r\nvar userMap = new Map();\r\nvar md5 = require(\"blueimp-md5\");\r\n\r\nexport default class extends ConnBase {\r\n\tserverUrl = '/elws/services/authapi';\r\n\r\n\r\n\r\n\r\n\r\n\t// admin add user \r\n\tasync addUser(senderId,username,password,phone,email,realName,userRole){\r\n\t\tvar user = userMap.get(senderId);\r\n\t\tif(user != null){\r\n\t\t\tvar hashpwd = this.hash(password);\r\n\t\t\tvar path = this.serverUrl + '/createUser?' + 'senderId='+senderId + '&secToken='+user.secToken\r\n\t\t\t\t\t+ '&name=' + username + '&password=' + hashpwd + '&userRole='+userRole+'&cardId=null' ;\r\n\t\t\tif( realName != null){ \r\n\t\t\t\tpath += '&realName=' + realName;\r\n\t\t\t}\r\n\t\t\tif( email != null){ \r\n\t\t\t\tpath += '&email=' + email;\r\n\t\t\t}\r\n\t\t\tif( phone != null){ \r\n\t\t\t\tpath += '&phone=' + phone;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tthis.updatePath(path);\r\n\t\t\treturn this.sendRequest();\r\n\t\t}\r\n\t\telse{\r\n\t\t\treturn this.localError({ \"errorCode\" : 100, \"errorMsg\" : \"用户没有登录\"});\r\n\t\t}\t\t\r\n\t}\r\n\r\n\t//update user information\r\n\tasync updateUserInfor(senderId,infor,cardId,disabled,code){\r\n\t\tvar user = userMap.get(senderId);\r\n\t\tconsole.log(\"============updateUserInfor start==================\");\r\n\t\tconsole.log(infor);\r\n\t\tvar realName = infor.realName;\r\n\t\tvar  email = infor.email;\r\n\t\tvar  phone = infor.phone;\r\n\t\tvar  userRole = infor.userRole;\r\n\r\n\t\tif(user != null){\r\n\t\t\tvar hashpwd = this.hash(infor.password);\r\n\t\t\tvar path = this.serverUrl + '/updateUser?' + 'senderId='+senderId + '&secToken='\r\n\t\t\t\t+user.secToken+ '&userId='+infor.userId+'&name=' + infor.name + '&password=' + hashpwd;\r\n\t\t\tif( realName != null){ \r\n\t\t\t\tpath += '&realName=' + realName;\r\n\t\t\t}\r\n\t\t\tif( email != null){ \r\n\t\t\t\tpath += '&email=' + email;\r\n\t\t\t}\r\n\t\t\tif( phone != null){ \r\n\t\t\t\tpath += '&phone=' + phone;\r\n\t\t\t}\r\n\t\t\tif( cardId != null){ \r\n\t\t\t\tpath += '&cardId=' + cardId;\r\n\t\t\t}\r\n\t\t\tif( userRole != null){ \r\n\t\t\t\tpath += '&userRole=' + userRole;\r\n\t\t\t}\r\n\t\t\tif( code != null){ \r\n\t\t\t\tpath += '&vCode=' + code;\r\n\t\t\t}\r\n\t\t\tif( disabled != null){ \r\n\t\t\t\tpath += '&disabled=' + disabled;\r\n\t\t\t}\r\n\t\t\tthis.updatePath(path);\r\n\t\t\treturn this.sendRequest();\r\n\t\t}else{\r\n\r\n\t\t\treturn this.localError({ \"errorCode\" : 100, \"errorMsg\" : \"用户没有登录\"});\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//judge phone exitence\r\n\r\n\tasync phoneTest(phoneNum){\r\n\t\t//var user = userMap.get(senderId);\r\n\t\t//if(user != null){\r\n\t\t\tthis.updatePath(this.serverUrl + '/getUserList?' + 'senderId=0' + '&secToken='+'&phone='+phoneNum);\r\n\t\t\treturn this.sendRequest();\r\n\t\t//}\r\n\t\t//else{\r\n\t\t//\treturn this.localError({ \"errorCode\" : 100, \"errorMsg\" : \"用户没有登录\"});\r\n\t//\t}\r\n\t}\r\n\r\n\t\r\n\t//api interface\r\n\tasync login(username, password){\t\t\r\n\t\tvar hashpwd = this.hash(password);\t\t\r\n\t\tconsole.log(\"hash=\" + hashpwd + \"|\" + password);\t\t\r\n\t\tthis.updatePath(this.serverUrl + '/login?' + 'name='+username + '&password='+hashpwd);\r\n\t\treturn this.sendRequest();\r\n\t};\r\n\t\r\n\tasync createUser( name, password, realName, email, phone ){\r\n\t\t//var user = userMap.get(senderId);\r\n\t\t//if(user != null){\r\n\t\t\tvar name1 = encodeURIComponent(name, \"UTF-8\");\r\n\t\t\tvar realName1 = encodeURIComponent(realName, \"UTF-8\");\r\n\t\t\tvar hashpwd = this.hash(password);\r\n\t\t\tvar path = this.serverUrl + '/createUser?' + 'senderId=5' + '&secToken='\r\n\t\t\t\t\t+ '&name=' + name1 + '&password=' + hashpwd + '&userRole=patient' ;\r\n\t\t\tif( realName != null){ \r\n\t\t\t\tpath += '&realName=' + realName1;\r\n\t\t\t}\r\n\t\t\tif( email != null){ \r\n\t\t\t\tpath += '&email=' + email;\r\n\t\t\t}\r\n\t\t\tif( phone != null){ \r\n\t\t\t\tpath += '&phone=' + phone;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.updatePath(path);\r\n\t\t\treturn this.sendRequest();\r\n\t\t//}\r\n\t\t//else{\r\n\t\t//\treturn this.localError({ \"errorCode\" : 100, \"errorMsg\" : \"用户没有登录\"});\r\n\t//\t}\t\t\r\n\t}\r\n\t\r\n\tasync updateUser( name, password, vCode,phone,realName, email,userRole, cardId, disabled){\r\n\t\tvar user = userMap.get(senderId);\r\n\t\t//if(user != null){\r\n\t\t\tvar hashpwd = this.hash(password);\r\n\t\t\tvar path = this.serverUrl + '/updateUser?' + 'senderId=8' + '&secToken=9'\r\n\t\t\t\t+ '&name=' + name + '&password=' + hashpwd;\r\n\t\t\t/*if( realName != null){ \r\n\t\t\t\tpath += '&realName=' + realName;\r\n\t\t\t}\r\n\t\t\tif( email != null){ \r\n\t\t\t\tpath += '&email=' + email;\r\n\t\t\t}\r\n\t\t\tif( phone != null){ \r\n\t\t\t\tpath += '&phone=' + phone;\r\n\t\t\t}\r\n\t\t\tif( cardId != null){ \r\n\t\t\t\tpath += '&cardId=' + cardId;\r\n\t\t\t}\r\n\t\t\tif( userRole != null){ \r\n\t\t\t\tpath += '&userRole=' + userRole;\r\n\t\t\t}\r\n\t\t\tif( vCode != null){ \r\n\t\t\t\tpath += '&vCode=' + vCode;\r\n\t\t\t}\r\n\t\t\tif( disabled != null){ \r\n\t\t\t\tpath += '&disabled=' + disabled;\r\n\t\t\t}*/\r\n\t\t\tthis.updatePath(path);\r\n\r\n\t\t\treturn this.sendRequest();\r\n\t\t//}\r\n\t\t//else{\r\n\t\t//\treturn this.localError({ \"errorCode\" : 100, \"errorMsg\" : \"用户没有登录\"});\r\n\t\t//}\t\t\r\n\t}\r\n\r\n\tasync updatePassword(name, password,phone,vCode){\r\n\t\tvar hashpwd = this.hash(password);\r\n\r\n\t\t\r\n\t\tthis.updatePath(this.serverUrl + '/updateUser?' + 'senderId=8'  + '&secToken=9'\r\n\t\t\t\t\t+ '&name=' + name + '&password=' + hashpwd + '&phone=' + phone \r\n\t\t\t\t\t + '&vCode=' + vCode   + '&cardId=' \r\n\t\t\t\t\t + '&role=' + '&disabled='  + '&userId=' );\r\n\t\t\treturn this.sendRequest();\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\tasync deleteUser(senderId, userId){\r\n\t\tconsole.log(senderId+'======'+userId);\r\n\r\n\t\tvar user = userMap.get(senderId);\r\n\t\tconsole.log(\"========\"+user.secToken)\r\n\t\tif(user != null){\r\n\t\t\tthis.updatePath(this.serverUrl + '/deleteUser?' + 'senderId='+senderId + '&secToken='+user.secToken\r\n\t\t\t\t\t+ '&userId=' + userId);\r\n\t\t\treturn this.sendRequest();\r\n\t\t}\r\n\t\telse{\r\n\t\t\treturn this.localError({ \"errorCode\" : 100, \"errorMsg\" : \"用户没有登录\"});\r\n\t\t}\t\t\r\n\t}\r\n\r\n\tasync disableUser(senderId, userId, flag){\r\n\t\tvar user = userMap.get(senderId);\r\n\t\tif(user != null){\r\n\t\t\tthis.updatePath(this.serverUrl + '/disableUser?' + 'senderId=' + senderId + '&secToken='+user.secToken\r\n\t\t\t\t\t+ '&userId=' + userId + '&flag=' + flag);\r\n\t\t\treturn this.sendRequest();\r\n\t\t}\r\n\t\telse{\r\n\t\t\treturn this.localError({ \"errorCode\" : 100, \"errorMsg\" : \"用户没有登录\"});\r\n\t\t}\t\t\r\n\t}\r\n\r\n\tasync getUser(senderId, userId){\r\n\t\tvar user = userMap.get(senderId);\r\n\t\tif(user != null){\r\n\t\t\tthis.updatePath(this.serverUrl + '/getUser?' + 'senderId=' + senderId + '&secToken='+user.secToken\r\n\t\t\t\t\t+ '&userId=' + userId);\r\n\t\t\treturn this.sendRequest();\r\n\t\t}\r\n\t\telse{\r\n\t\t\treturn this.localError({ \"errorCode\" : 100, \"errorMsg\" : \"用户没有登录\"});\r\n\t\t}\t\t\r\n\t}\r\n\r\n\tasync sendShortMsgCode(senderId,type, key){\r\n\t\t//var user = userMap.get(senderId);\r\n\t\t//if(user != null){\r\n\t\t\tconsole.log(senderId+\"|\"+key+\"|\"+type+\"|\");\r\n\t\t\tthis.updatePath(this.serverUrl + '/sendShortMsgCode?' + 'senderId=' + senderId + '&secToken='\r\n\t\t\t\t\t+ '&type=' + type + '&key=' + key );\r\n\t\t\treturn this.sendRequest();\r\n\t\t//}\r\n\t\t//else{\r\n\t\t\t//return this.localError({ \"errorCode\" : 100, \"errorMsg\" : \"用户没有登录\"});\r\n\t\t//}\t\t\r\n\t}\r\n\r\n\tasync verificationCode(key, code){\r\n\t\t//var user = userMap.get(senderId);\r\n\t\t//if(user != null){\r\n\t\t\tthis.updatePath(this.serverUrl + '/verificationCode?' + 'senderId=0'  + '&secToken=123'\r\n\t\t\t\t\t+ '&key=' + key + '&code=' + code );\r\n\t\t\treturn this.sendRequest();\r\n\t\t//}\r\n\t\t//else{\r\n\t\t//\treturn this.localError({ \"errorCode\" : 100, \"errorMsg\" : \"用户没有登录\"});\r\n\t\t//}\t\t\r\n\t}\r\n\r\n\tasync getUserList(senderId, phoneNum){\r\n\r\n\t\t\r\n\t\tvar user = userMap.get(senderId);\r\n\t\tif(user != null){\r\n\t\t\tthis.updatePath(this.serverUrl + '/getUserList?' + 'senderId='+senderId + '&secToken='+user.secToken);\r\n\t\t\treturn this.sendRequest();\r\n\t\t}\r\n\t\telse{\r\n\t\t\treturn this.localError({ \"errorCode\" : 100, \"errorMsg\" : \"用户没有登录\"});\r\n\t\t}\r\n\t}\r\n\t\r\n\t//utilitize methods\r\n\tstatic setUser(userInfo){\r\n\t\tvar userId = userInfo.userId;\r\n\t\tconsole.log(userInfo.userId + \"|\" + userInfo.secToken  + \"|||\" )\r\n\t\tconsole.log(\"[type]\" + typeof userId );\r\n\t\tif( userId != null && typeof userId == \"number\"){\r\n\t\t\tuserId = \"\" + userId;\r\n\t\t}\r\n\t\tuserMap.set(userId, userInfo);\r\n\t}\r\n\t\r\n\tstatic getUser(userId){\r\n\t\tvar u =  userMap.get(userId);\t\t\r\n\t\tconsole.log(\"|\" +u.userId + \"|\" + u.secToken  + \"--\" );\r\n\t\treturn u;\r\n\t}\r\n\t\r\n\thash(data){\r\n\t\tvar hs = md5(data);\r\n\t\tvar sbhash = hs.substring(8,24);\r\n\t\tvar resv = \"\";\r\n\t\t\r\n\t\tfor(var i=sbhash.length; i>=1; i--){\r\n\t\t\tresv += sbhash.charAt(i-1);\r\n\t\t}\r\n\t\t\r\n\t\tconsole.log(\"hash=\" + hs + \"|\" + sbhash + \"|\" + sbhash.length + \"|\" + resv);\r\n\t\treturn resv;\r\n\t}\r\n\r\n}\r\n"
    ]
}