{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\home\\controller\\production.js"
    ],
    "names": [
        "mgm",
        "mgr",
        "errorCode",
        "indexAction",
        "display",
        "fd180Action",
        "getCurrentPrice",
        "then",
        "result",
        "console",
        "log",
        "itemId",
        "price",
        "gp",
        "assign",
        "gp1",
        "gp2",
        "fd600Action",
        "exomeAction",
        "infor",
        "get",
        "buyAction",
        "userId",
        "cookie",
        "orderId",
        "isGet",
        "code",
        "username",
        "adress",
        "email",
        "totalprice",
        "testItem",
        "notes",
        "arrayItem",
        "split",
        "getPersonCurrentPrice",
        "aa",
        "gp00",
        "gp11",
        "gp22",
        "bb",
        "bb1",
        "cc",
        "cc1",
        "aa2",
        "aa3",
        "countPrice",
        "bb2",
        "cc2",
        "pname",
        "ft_n",
        "ft",
        "fc_n",
        "fc",
        "fa_n",
        "fa",
        "substring",
        "length",
        "price1",
        "price2",
        "payprice",
        "recvAddress",
        "reptReceiver",
        "buyinforAction",
        "tradeinfor",
        "post",
        "orderId3",
        "orderId4",
        "parseInt",
        "isPost",
        "queryOrder",
        "error",
        "pm1",
        "testList",
        "customerId",
        "updTestOrder",
        "phoneNum",
        "promCode",
        "uo",
        "buildAliPayRequest",
        "pm2",
        "formText",
        "addCustomer",
        "pm",
        "addTestOrder",
        "userId1",
        "orderId1",
        "orderInfor",
        "setOrder",
        "addOrUpdOrderAccess",
        "pm3",
        "unipaybuyinforAction",
        "unionPay"
    ],
    "mappings": "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",
    "file": "..\\..\\..\\src\\home\\controller\\production.js",
    "sourcesContent": [
        "'use strict';\r\n\r\nimport Base from './base.js';\r\nimport UserMgr from '../connect/usermgr.js';\r\nimport BizMgr from '../connect/bizmgr.js';\r\n\r\nvar mgm = new BizMgr();\r\n//---------------------------\r\nvar mgr = new UserMgr();\r\nvar errorCode = 0;\r\n\r\nexport default class extends Base {\r\n  \r\n  /**\r\n   * index action\r\n   * @return {Promise} []\r\n   */\r\n  indexAction(){\r\n    //auto render template file index_index.html\r\n    return this.display();\r\n  }\r\n\r\n  async fd180Action(){\r\n\t//var userId = this.cookie('userId');\r\n    try{\r\n      let gp=await mgm.getCurrentPrice( 1, 'AAAAAAAAAA')\r\n    .then(function (result){\r\n      console.log(result.itemId+result.price+\"----------------\");\r\n      //\r\n      console.log(\"-----------------\")\r\n      \r\n     \r\n      \r\n      return result.price;\r\n\r\n    });\r\n    console.log(gp);\r\n    this.assign('price',gp);\r\n    }\r\n    \r\n    catch(e){\r\n        console.log(\"f180服务器连不上\");\r\n           this.assign('tips',\"服务器正忙.....暂时不能购买\");\r\n           this.assign('price',12800);\r\n           this.assign('price1',13800);\r\n           this.assign('price2',16800);\r\n           return this.display();\r\n\r\n    }\r\n\r\n\r\n    \r\n    \r\n    let gp1=await mgm.getCurrentPrice(2,'AAAAAAAAAA')\r\n    .then(function (result){\r\n      console.log(result.itemId+result.price+\"----------------\");\r\n      //\r\n      console.log(\"-----------------\")\r\n      return result.price;\r\n\r\n    });\r\n    console.log(gp1);\r\n    this.assign('price1',gp1);\r\n    let gp2=await mgm.getCurrentPrice(8,'AAAAAAAAAA')\r\n    .then(function (result){\r\n      console.log(result.itemId+result.price+\"----------------\");\r\n      //\r\n      console.log(\"-----------------\")\r\n      return result.price;\r\n\r\n    });\r\n    console.log(gp2);\r\n    this.assign('price2',gp2);\r\n    return this.display();\r\n\r\n   \r\n  }\r\n\r\n  async fd600Action(){\r\n      \r\n      \r\n      try{\r\n        let gp=await mgm.getCurrentPrice(4,'AAAAAAAAAA')\r\n        .then(function (result){\r\n      console.log(result.itemId+result.price+\"----------------\");\r\n\r\n      //\r\n      console.log(\"-----------------\")\r\n      return result.price;\r\n      console.log(gp);\r\n      \r\n\r\n    });\r\n        this.assign('price',gp);\r\n      }catch(e){\r\n           console.log(\"f180服务器连不上\");\r\n           this.assign('tips',\"服务器正忙.....暂时不能购买\");\r\n           this.assign('price',1122);\r\n           this.assign('price1',1123);\r\n           this.assign('price2',1124);\r\n           return this.display();\r\n      };\r\n      try{\r\n        let gp1=await mgm.getCurrentPrice(3,'AAAAAAAAAA')\r\n    .then(function (result){\r\n      console.log(result.itemId+result.price+\"----------------\");\r\n      //\r\n      console.log(\"-----------------\")\r\n      return result.price;\r\n\r\n    });\r\n    console.log(gp1);\r\n    this.assign('price1',gp1);\r\n      }catch(e){\r\n        console.log(\"f180服务器连不上\");\r\n           \r\n\r\n      };\r\n      try{\r\n        let gp2=await mgm.getCurrentPrice(9,'AAAAAAAAAA')\r\n    .then(function (result){\r\n      console.log(result.itemId+result.price+\"----------------\");\r\n      //\r\n      console.log(\"-----------------\")\r\n      return result.price;\r\n\r\n    });\r\n    console.log(gp2);\r\n    this.assign('price2',gp2);\r\n\r\n      }catch(e){\r\n        console.log(\"f180服务器连不上\");\r\n           \r\n\r\n      }\r\n    \r\n\r\n    return this.display();\r\n  }\r\n\r\n  async exomeAction(){\r\n     try{\r\n      let infor =this.get();\r\n      \r\n      let gp=await mgm.getCurrentPrice(5,'AAAAAAAAAA')\r\n        .then(function (result){\r\n      console.log(result.itemId+result.price+\"----------------\");\r\n      //\r\n      console.log(\"-----------------\")\r\n      return result.price;\r\n\r\n    })\r\n    console.log(gp);\r\n    this.assign('price',gp);\r\n\r\n\r\n\r\n\r\n\r\n\r\n     }catch(e){\r\n        console.log(e);\r\n        console.log(\"服务器连不上\");\r\n        \r\n        //test(this);\r\n        this.assign('price','111');\r\n        this.assign('tips',\"服务器正忙.....暂时不能购买\");\r\n     } \r\n      /*function test(this){\r\n        console.log(\"test() run\");\r\n        \r\n      }*/\r\n\r\n    return this.display();\r\n\r\n\r\n\t\r\n\r\n  }\r\n\r\n  async buyAction(){\r\n\r\n\r\n    //这个是优惠码的代码\r\n    let infor =this.get();\r\n    var userId = this.cookie(\"userId\");\r\n\r\n    this.assign(\"orderId\",infor.orderId);\r\n    if(this.isGet()&&infor.code!='undefined'&&infor.code!=null){\r\n     // let buyinfor = this.get();\r\n        \r\n        console.log(\"buyinforAction code test\");\r\n        console.log(infor.code);\r\n        this.assign(\"infor\",infor);\r\n        //this.assign(\"infor.pname\",infor.pname);\r\n\r\n         this.assign(\"reptReceiver\",infor.username);\r\n\r\n        this.assign(\"recvAddress\",infor.adress);\r\n\r\n        this.assign(\"email\",infor.email);\r\n\r\n        this.assign(\"code\",infor.code);\r\n\r\n        this.assign(\"price\",infor.totalprice);\r\n\r\n         this.assign(\"testItem\",infor.testItem);\r\n        \r\n\r\n        this.assign(\"notes\",infor.notes);\r\n\r\n        \r\n       // this.assign(\"orderId\",infor.orderId);\r\n\r\n        console.log(infor);\r\n        //console.log(buyinfor.testItem);\r\n        var testItem = infor.testItem;\r\n        var arrayItem = testItem.split(\",\");\r\n        console.log(arrayItem);\r\n        console.log(arrayItem[3]);\r\n\r\n        let aa = await mgm.getPersonCurrentPrice(userId,arrayItem[0], infor.code)\r\n        .then(function(result){\r\n          //console.log(result);\r\n          return result;\r\n        })\r\n        console.log('--------aa--------')\r\n        console.log(aa.price);\r\n\r\n\r\n\r\n        //把错误失效的优惠码获取价格较低的那个这个是和10个A做比较的测试\r\n\r\n        try{\r\n           let gp00=await mgm.getCurrentPrice( arrayItem[0], 'AAAAAAAAAA')\r\n       \r\n    .then(function (result){\r\n      console.log(result.itemId+result.price+\"----------------\");\r\n      //\r\n      console.log(\"-----------------\")\r\n      \r\n     \r\n      \r\n      return result.price;\r\n\r\n    });\r\n    //console.log(\"=============\"+gp);\r\n    var gp = gp00;\r\n\r\n        }catch(e){\r\n          console.log(\"获取10个大A的价格测试失败\");\r\n        }\r\n\r\n       /* if(arrayItem[2]!=null){\r\n\r\n        }else{\r\n          \r\n        }*/\r\n        try{\r\n           let gp11=await mgm.getCurrentPrice(arrayItem[2], 'AAAAAAAAAA')\r\n       \r\n    .then(function (result){\r\n      console.log(result.itemId+result.price+\"----------------\");\r\n      //\r\n      console.log(\"-----------------\")\r\n      \r\n     \r\n      \r\n      return result.price;\r\n\r\n    });\r\n    console.log(gp11);\r\n    var gp1 = gp11;\r\n\r\n        }catch(e){\r\n          console.log(\"获取10个大A的价格测试失败\");\r\n        }\r\n\r\n        try{\r\n           let gp22=await mgm.getCurrentPrice( arrayItem[4], 'AAAAAAAAAA')\r\n       \r\n    .then(function (result){\r\n      console.log(result.itemId+result.price+\"----------------\");\r\n      //\r\n      console.log(\"-----------------\")\r\n      \r\n     \r\n      \r\n      return result.price;\r\n\r\n    });\r\n    console.log(gp22);\r\n    var gp2 = gp22;\r\n\r\n        }catch(e){\r\n          console.log(\"获取10个大A的价格测试失败\");\r\n        }\r\n         \r\n\r\n\r\n\r\n        try{\r\n           \r\n            let bb = await mgm.getPersonCurrentPrice(userId,arrayItem[2], infor.code)\r\n        .then(function(result){\r\n          //console.log(result);\r\n          return result;\r\n        })\r\n\r\n        console.log(bb);\r\n       \r\n        var bb1 = bb.price;\r\n        }catch(e){\r\n\r\n        }\r\n        \r\n        try{\r\n        \r\n            let cc = await mgm.getPersonCurrentPrice(userId,arrayItem[4], infor.code)\r\n        .then(function(result){\r\n          //console.log(result);\r\n          return result;\r\n        })\r\n\r\n        console.log(cc);\r\n         var cc1 = cc.price;\r\n        }catch(e){\r\n\r\n        }\r\n       \r\n         \r\n        var aa2 = aa.price;\r\n        var aa3 =  gp>aa2?aa2:gp;\r\n        var countPrice = aa3*arrayItem[1];\r\n         \r\n         //var countPrice = gp>countPrice1?countPrice1:gp;\r\n         console.log(countPrice);\r\n        if(arrayItem[2] != null){\r\n          var bb2 = gp1>bb1?bb1:gp1;\r\n          countPrice =countPrice+bb2*arrayItem[3];\r\n           console.log(countPrice);\r\n        }\r\n\r\n        if(arrayItem[4] != null){\r\n          var cc2 = gp2>cc1?cc1:gp2;\r\n          countPrice =countPrice+ cc2*arrayItem[5];\r\n           console.log(countPrice);\r\n        }\r\n\r\n        this.assign(\"countPrice\",countPrice);\r\n        console.log('====countPrice test==========');\r\n       \r\n\r\n\r\n\r\n\r\n        return this.display();\r\n    \r\n  }\r\n   //这个是不用支付的代码\r\n    try{\r\n       // let infor =this.get();\r\n    console.log(\"--------buyAction start --------------\")\r\n    //console.log(price+\"|\"+itemId+\"|\"+number);\r\n    console.log(infor);\r\n     //production infor \r\n    this.assign(\"infor\",infor);\r\n    //production name \r\n    this.assign(\"pname\",infor.pname);\r\n    //add production testItem\r\n\r\n    let testItem = \"\";\r\n    if(infor.ft_n>=1){\r\n        testItem = infor.ft+\",\"+infor.ft_n+\",\"\r\n    }\r\n     \r\n    \r\n\r\n    if(infor.fc_n>=1){\r\n        testItem+=infor.fc+\",\"+infor.fc_n+\",\"\r\n    }\r\n\r\n    if(infor.fa_n>=1){\r\n        testItem+=infor.fa+\",\"+infor.fa_n+\",\"\r\n    }\r\n    testItem = testItem.substring(0,testItem.length-1);\r\n    console.log(\"------testItem test---------\");\r\n    console.log(testItem);\r\n    this.assign(\"testItem\",testItem);\r\n\r\n\r\n     //add production totalprice\r\n   let price=infor.price*infor.ft_n;\r\n   if(infor.price1!=null){\r\n      price+=infor.price1*infor.fc_n\r\n   }\r\n   if(infor.price2!=null){\r\n      price+=infor.price2*infor.fa_n\r\n   }\r\n    console.log(price);\r\n    this.assign(\"price\",price);\r\n    if(infor.payprice!='undefined'){\r\n      this.assign(\"price\",infor.payprice);\r\n        \r\n    }\r\n    if(infor.recvAddress!='undefined'){\r\n      this.assign(\"recvAddress\",infor.recvAddress);\r\n        \r\n    }\r\n    if(infor.notes!='undefined'){\r\n      this.assign(\"notes\",infor.notes);\r\n        \r\n    }\r\n\r\n    console.log(infor.notes);\r\n    if(infor.reptReceiver!='undefined'){\r\n      this.assign(\"reptReceiver\",infor.reptReceiver);\r\n        \r\n    }\r\n    console.log(\"----------------\");\r\n    //this.assign(\"price\",infor.price);\r\n    \r\n    //return this.redirect('/production/buy');\r\n   //console.log(this);\r\n\r\n\r\n    return this.display();\r\n    }catch(e){\r\n      this.assign(\"msg\",\"服务器正忙，请稍后再试\");\r\n      return this.display();\r\n    }\r\n    \r\n      \r\n\r\n    \r\n    \r\n  \r\n  }\r\n\r\n\r\n\r\nasync buyinforAction(){\r\n\r\n\r\n    let tradeinfor = this.post();\r\n    var userId = this.cookie(\"userId\");\r\n\r\n\r\n    //这个是从未支付的里订单的updateOrder的操作\r\n    console.log(\"===========buyinforAction start ==========================\")\r\n\r\n    console.log(tradeinfor);\r\n    let orderId3 = tradeinfor.orderId;\r\n\r\n    let orderId4 = parseInt(orderId3);\r\n    console.log(orderId4);\r\n    \r\n\r\n\r\n    console.log(typeof orderId4);\r\n    if(this.isPost()&&tradeinfor.orderId>0){\r\n\r\n\r\n      console.log(\"========updTestOrder==============\")\r\n\r\n      let pm1 = await mgm.queryOrder(userId)\r\n      .then(function(result){\r\n\r\n        //console.log(result);\r\n        return result;\r\n      },function(error){\r\n        console.log(error);\r\n      })\r\n      console.log(pm1.testList[0].customerId);\r\n\r\n      let uo = await mgm.updTestOrder(userId, tradeinfor.orderId,pm1.testList[0].customerId, tradeinfor.testItem, tradeinfor.phoneNum, tradeinfor.email, \r\n        tradeinfor.username,tradeinfor.totalprice,tradeinfor.adress,tradeinfor.notes,tradeinfor.promCode)\r\n      .then(function(result){\r\n\r\n        console.log(result);\r\n\r\n        return result;\r\n      })\r\n\r\n      console.log(uo);\r\n\r\n\r\n      /*if(uo.errorCode==0){\r\n         console.log(\"=====addOrUpdOrderAccess start=================\");\r\n         var userId1 = tradeinfor.orderId+','+userId;\r\n         var orderId1 = tradeinfor.orderId;\r\n         var orderInfor={orderId:orderId1,userId:userId1};\r\n         console.log(orderInfor);\r\n         BizMgr.setOrder(orderInfor);\r\n         try{\r\n          let pm3 = await mgm.addOrUpdOrderAccess(userId, tradeinfor.orderId)\r\n          .then(function(result){\r\n\r\n            \r\n              return result;\r\n          },function(error){\r\n            return error;\r\n          })\r\n\r\n           console.log(pm3)\r\n         }catch(e){\r\n\r\n\r\n         }\r\n        \r\n       }\r\n*/\r\n\r\n       console.log(\"===== notpay  buildAliPayRequest start=================\");\r\n   // let pm2 = await mgm.buildAliPayRequest(userId, pm1.orderId, tradeinfor.pname,tradeinfor.totalprice, 1,'http://eaxqe3.natappfree.cc/backextra/alipaynotify','http://eaxqe3.natappfree.cc/backextra/alipayreturn')\r\n   let pm2 = await mgm.buildAliPayRequest(userId, tradeinfor.orderId, tradeinfor.pname,tradeinfor.totalprice, 1,'http://121.40.55.125:8360/backextra/alipaynotify','http://121.40.55.125:8360/backextra/alipayreturn')\r\n\r\n     .then(function(result){\r\n       console.log(result);\r\n       return result;\r\n     });\r\n    \r\n  console.log(\"=======buyinforAction pm============\");\r\n  //console.log(pm);\r\n  console.log(typeof pm2.formText);\r\n  this.assign(\"formtext\",pm2.formText);\r\n  //this.assign(\"totalprice\",tradeinfor.totalprice);\r\n\r\n\r\n      return this.display();\r\n\r\n    }\r\n\r\n\r\n    \r\n    \r\n\r\n    console.log(\"--------alipay start --------------\")\r\n   // let tradeinfor = this.post();\r\n    console.log(tradeinfor);\r\n    console.log(tradeinfor.totalprice);\r\n    console.log(tradeinfor.pname);\r\n  console.log(\"=======addCustomer start============\");\r\n  var userId = this.cookie(\"userId\");\r\n  console.log(\"[buyinforAction] \" + userId);\r\n  let pm = await mgm.addCustomer(userId,tradeinfor.username, tradeinfor.phoneNum, tradeinfor.email)\r\n  .then(function(result){\r\n\r\n     console.log(result);\r\n\r\n    return result;\r\n\r\n  })\r\n  console.log(\"======= addCustomer pm==========\")\r\n  console.log(pm);\r\n \r\n    if(pm.errorCode==0){\r\n     console.log(\"=====addTestOrder start=================\");\r\n     let pm1 = await mgm.addTestOrder(userId, pm.customerId, tradeinfor.testItem, tradeinfor.phoneNum, tradeinfor.email, tradeinfor.username,tradeinfor.totalprice,tradeinfor.adress,tradeinfor.notes,tradeinfor.code)\r\n\r\n    .then(function(result){\r\n          console.log(result);\r\n\r\n          return result;\r\n    })\r\n    console.log(\"======= addTestOrder pm1==========\")\r\n    console.log(pm1);\r\n\r\n    if(pm1.errorCode==0){\r\n         console.log(\"=====addOrUpdOrderAccess start=================\");\r\n         var userId1 = pm1.orderId+','+userId;\r\n         var orderId1 = pm1.orderId;\r\n         var orderInfor={orderId:orderId1,userId:userId1};\r\n         console.log(orderInfor);\r\n         BizMgr.setOrder(orderInfor);\r\n         try{\r\n          let pm3 = await mgm.addOrUpdOrderAccess(userId, pm1.orderId)\r\n          .then(function(result){\r\n\r\n            \r\n              return result;\r\n          },function(error){\r\n            return error;\r\n          })\r\n         }catch(e){\r\n\r\n\r\n         }\r\n\r\n    console.log(\"=====buildAliPayRequest start=================\");\r\n   // let pm2 = await mgm.buildAliPayRequest(userId, pm1.orderId, tradeinfor.pname,tradeinfor.totalprice, 1,'http://cfxi2z.natappfree.cc/backextra/alipaynotify','http://cfxi2z.natappfree.cc/backextra/alipayreturn')\r\n  let pm2 = await mgm.buildAliPayRequest(userId, pm1.orderId, tradeinfor.pname,tradeinfor.totalprice, 1,'http://121.40.55.125:8360/backextra/alipaynotify','http://121.40.55.125:8360/backextra/alipayreturn')\r\n\r\n     .then(function(result){\r\n    \t console.log(result);\r\n    \t return result;\r\n     });\r\n    \r\n  console.log(\"=======buyinforAction pm============\");\r\n  //console.log(pm);\r\n  console.log(typeof pm2.formText);\r\n  this.assign(\"formtext\",pm2.formText);\r\n  this.assign(\"totalprice\",tradeinfor.totalprice);\r\n\r\n\r\n    }else{\r\n      \r\n      console.log(\" alipay fail \");\r\n    }\r\n    }else{\r\n      console.log(\" alipay fail \");\r\n    }\r\n    \r\n\r\n\r\n  \r\n  return this.display();\r\n\r\n\r\n}\r\n  \r\n  //unipay method \r\n  async unipaybuyinforAction(){\r\n\r\n\r\n    let tradeinfor = this.post();\r\n    var userId = this.cookie(\"userId\");\r\n     //这个是从未支付的里订单的updateOrder的操作\r\n    console.log(\"===========buyinforAction start ==========================\")\r\n\r\n    console.log(tradeinfor);\r\n    let orderId3 = tradeinfor.orderId;\r\n\r\n    let orderId4 = parseInt(orderId3);\r\n    console.log(orderId4);\r\n    \r\n\r\n\r\n    console.log(typeof orderId4);\r\n    if(this.isPost()&&tradeinfor.orderId>0){\r\n\r\n\r\n      console.log(\"========updTestOrder==============\")\r\n\r\n      let pm1 = await mgm.queryOrder(userId)\r\n      .then(function(result){\r\n\r\n        //console.log(result);\r\n        return result;\r\n      },function(error){\r\n        console.log(error);\r\n      })\r\n      console.log(pm1.testList[0].customerId);\r\n\r\n      let uo = await mgm.updTestOrder(userId, tradeinfor.orderId,pm1.testList[0].customerId, tradeinfor.testItem, tradeinfor.phoneNum, tradeinfor.email, \r\n        tradeinfor.username,tradeinfor.totalprice,tradeinfor.adress,tradeinfor.notes,tradeinfor.promCode)\r\n      .then(function(result){\r\n\r\n        console.log(result);\r\n\r\n        return result;\r\n      })\r\n\r\n      console.log(uo);\r\n\r\n\r\n      /*if(uo.errorCode==0){\r\n         console.log(\"=====addOrUpdOrderAccess start=================\");\r\n         var userId1 = tradeinfor.orderId+','+userId;\r\n         var orderId1 = tradeinfor.orderId;\r\n         var orderInfor={orderId:orderId1,userId:userId1};\r\n         console.log(orderInfor);\r\n         BizMgr.setOrder(orderInfor);\r\n         try{\r\n          let pm3 = await mgm.addOrUpdOrderAccess(userId, tradeinfor.orderId)\r\n          .then(function(result){\r\n\r\n            \r\n              return result;\r\n          },function(error){\r\n            return error;\r\n          })\r\n\r\n           console.log(pm3)\r\n         }catch(e){\r\n\r\n\r\n         }\r\n        \r\n       }\r\n*/\r\n\r\n       \r\n\r\n\r\n\r\n\r\n       console.log(\"======= notpay unipaybuyinforAction start============\");\r\n     //let pm = await mgm.unionPay(userId,pm1.orderId,tradeinfor.totalprice*100,\"http://eaxqe3.natappfree.cc/back/test\",\"http://eaxqe3.natappfree.cc/back/backtest\")\r\n      let pm = await mgm.unionPay(userId,tradeinfor.orderId,tradeinfor.totalprice*100,\"http://121.40.55.125:8360/back/test\",\"http://121.40.55.125:8360/back/backtest\")\r\n  .then(function(result){\r\n\r\n\r\n    console.log(result);\r\n\r\n    return result;\r\n\r\n  })\r\n  console.log(\"=======unipaybuyinforAction pm============\");\r\n  //console.log(pm);\r\n  console.log(typeof pm.formText);\r\n  this.assign(\"formtext\",pm.formText);\r\n  //this.assign(\"totalprice\",tradeinfor.totalprice);\r\n  return this.display();\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    try{\r\n        console.log(\"--------unipay start --------------\")\r\n    \r\n  \r\n\r\n  console.log(tradeinfor);\r\n  console.log(tradeinfor.totalprice);\r\n  console.log(tradeinfor.pname);\r\n  var userId = this.cookie(\"userId\");\r\n  console.log(\"[buyinforAction] \" + userId);\r\n\r\n\r\n   console.log(\"=======addCustomer start============\");\r\n  var userId = this.cookie(\"userId\");\r\n  console.log(\"[buyinforAction] \" + userId);\r\n  let pm = await mgm.addCustomer(userId,tradeinfor.username, tradeinfor.phoneNum, tradeinfor.email)\r\n  .then(function(result){\r\n\r\n     console.log(result);\r\n\r\n    return result;\r\n\r\n  })\r\n  console.log(\"======= addCustomer pm==========\")\r\n  console.log(pm);\r\n\r\n\r\n\r\n  if(pm.errorCode==0){\r\n     console.log(\"=====addTestOrder start=================\");\r\n     let pm1 = await mgm.addTestOrder(userId, pm.customerId, tradeinfor.testItem, tradeinfor.phoneNum, tradeinfor.email, tradeinfor.username,tradeinfor.totalprice,tradeinfor.adress,tradeinfor.notes,tradeinfor.code)\r\n\r\n    .then(function(result){\r\n          console.log(result);\r\n\r\n          return result;\r\n    })\r\n    console.log(\"======= addTestOrder pm1==========\")\r\n    console.log(pm1);\r\n\r\n    if(pm1.errorCode==0){\r\n\r\n\r\n\r\n      console.log(\"=====addOrUpdOrderAccess start=================\");\r\n         try{\r\n          let pm3 = await mgm.addOrUpdOrderAccess(userId, pm1.orderId)\r\n          .then(function(result){\r\n\r\n            \r\n              return result;\r\n          },function(error){\r\n            return error;\r\n          })\r\n         }catch(e){\r\n\r\n\r\n         }\r\n\r\n      console.log(\"=======unipaybuyinforAction start============\");\r\n     //let pm = await mgm.unionPay(userId,pm1.orderId,tradeinfor.totalprice*100,\"http://eaxqe3.natappfree.cc/back/test\",\"http://eaxqe3.natappfree.cc/back/backtest\")\r\n      let pm = await mgm.unionPay(userId,pm1.orderId,tradeinfor.totalprice*100,\"http://121.40.55.125:8360/back/test\",\"http://121.40.55.125:8360/back/backtest\")\r\n  .then(function(result){\r\n\r\n\r\n    console.log(result);\r\n\r\n    return result;\r\n\r\n  })\r\n  console.log(\"=======unipaybuyinforAction pm============\");\r\n  //console.log(pm);\r\n  console.log(typeof pm.formText);\r\n  this.assign(\"formtext\",pm.formText);\r\n  this.assign(\"totalprice\",tradeinfor.totalprice);\r\n  return this.display();\r\n\r\n\r\n    }else{\r\n      \r\n      console.log(\" unionpay fail \");\r\n    }\r\n    }else{\r\n      console.log(\" unionpay fail \");\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n  \r\n    }catch(e){\r\n      this.assign(\"msg\",\"服务器正忙，请稍后再试\");\r\n      return this.display();\r\n\r\n    }\r\n      \r\n    \r\n  }\r\n\r\n\r\n\r\n}"
    ]
}