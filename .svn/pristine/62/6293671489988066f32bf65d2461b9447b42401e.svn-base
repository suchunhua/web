{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\home\\controller\\back.js"
    ],
    "names": [
        "mgr",
        "mgm",
        "errorCode",
        "indexAction",
        "display",
        "testpageAction",
        "adduserAction",
        "year",
        "get",
        "console",
        "log",
        "isGet",
        "discpriceinforAction",
        "discinfor",
        "assign",
        "startDate",
        "endDate",
        "startDate1",
        "substring",
        "endDate1",
        "itemId",
        "updatepriceAction",
        "updateinfor",
        "post",
        "senderId",
        "cookie",
        "updateProductionPrice",
        "name",
        "desc",
        "price",
        "then",
        "result",
        "error",
        "pm",
        "redirect",
        "productioninforAction",
        "infor",
        "e",
        "updateuserAction",
        "updateUserInfor",
        "userinforAction",
        "deleteuserAction",
        "userId",
        "deleteUser",
        "disclistAction",
        "role",
        "getDiscPriceList",
        "effactiveDate4",
        "Date",
        "effactiveDate",
        "effactiveDate1",
        "effactiveDate2",
        "split",
        "effactiveDateTotal",
        "parseInt",
        "discList1",
        "Array",
        "j",
        "discList",
        "startDate2",
        "endDate2",
        "startDateTotal",
        "endDateTotal",
        "push",
        "pricelistAction",
        "getTestItemList",
        "itemList",
        "pmstr",
        "userList",
        "userlistAction",
        "getUserList",
        "elm",
        "password",
        "testAction",
        "userId1",
        "reqReserved",
        "userId2",
        "secToken",
        "infor1",
        "inforStr",
        "unionVerify",
        "pm2",
        "unionBill",
        "backtestAction"
    ],
    "mappings": "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",
    "file": "..\\..\\..\\src\\home\\controller\\back.js",
    "sourcesContent": [
        "'use strict';\r\n\r\nimport Base from './base.js';\r\nimport UserMgr from '../connect/usermgr.js';\r\nimport BizMgr from '../connect/bizmgr.js';\r\n\r\nvar mgr = new UserMgr();\r\n//-------------------------------\r\nvar mgm = new BizMgr();\r\nvar errorCode = 0;\r\nexport default class extends Base {\r\n\r\n\t async indexAction(){\r\n\t \treturn this.display();\r\n\t }\r\n\r\n\r\n\r\n   async  testpageAction(){\r\n\r\n      return this.display();\r\n   }\r\n\r\n   async adduserAction(){\r\n\r\n\r\n      let year = this.get('year');\r\n      console.log(year);\r\n     //如果是get请求，直接显示登录页面\r\n    if(this.isGet()){\r\n      return this.display();\r\n    }\r\n\r\n\r\n   }\r\n\r\n\r\n\r\n   \r\n   async discpriceinforAction(){\r\n\r\n    var discinfor = this.get();\r\n    console.log(\"======discinforAction start=============\");\r\n\r\n\r\n    console.log(discinfor);\r\n\r\n\r\n\r\n    this.assign(\"discinfor\",discinfor);\r\n    //change time format\r\n\r\n    console.log(discinfor.startDate);\r\n    console.log(discinfor.endDate);\r\n   var  startDate = discinfor.startDate;\r\n   var  endDate = discinfor.endDate;\r\n\r\n   var startDate1 = startDate.substring(0,10);\r\n   var endDate1 = endDate.substring(0,10);\r\n   console.log(startDate1);\r\n   this.assign(\"startDate1\",startDate1);\r\n   this.assign(\"endDate1\",endDate1);\r\n    if(discinfor.itemId==1){\r\n        this.assign(\"itemname\",\"FD-Tissue-180\");\r\n\r\n    }\r\n\r\n    if(discinfor.itemId==2) {\r\n        \r\n         this.assign(\"itemname\",\"FD-ctDNA-180\");\r\n    }\r\n\r\n    if(discinfor.itemId==3){\r\n        this.assign(\"itemname\",\"FD-Tissue-600\");\r\n\r\n    }\r\n\r\n    if(discinfor.itemId==4) {\r\n        \r\n         this.assign(\"itemname\",\"FD-ctDNA-600\");\r\n    }\r\n    if(discinfor.itemId==5){\r\n        this.assign(\"itemname\",\"FD-Exome\");\r\n\r\n    }\r\n\r\n    if(discinfor.itemId==6) {\r\n        \r\n         this.assign(\"itemname\",\"FD-ctDNA-Exome\");\r\n    }\r\n    if(discinfor.itemId==7){\r\n        this.assign(\"itemname\",\"FD-Tissue-RNA\");\r\n\r\n    }\r\n\r\n    if(discinfor.itemId==8) {\r\n        \r\n         this.assign(\"itemname\",\"FD-Tissue-180+FD-ctDNA-180\");\r\n    }\r\n     if(discinfor.itemId==9) {\r\n        \r\n         this.assign(\"itemname\",\"FD-Tissue-600+FD-ctDNA-600\");\r\n    }\r\n    //return this.redirect(\"/back/discpriceinfor\");\r\n\r\n\r\n\r\n    return this.display();\r\n\r\n   }\r\n   async updatepriceAction(){\r\n\r\n      let updateinfor = this.post();\r\n\r\n      console.log(\"======updatepriceAction start==========\"); \r\n      console.log(updateinfor);\r\n      var senderId = this.cookie('userId');\r\n\r\n      try{\r\n        let pm = await mgm.updateProductionPrice(senderId,updateinfor.itemId,updateinfor.name,updateinfor.desc,updateinfor.price)\r\n        .then(function(result){\r\n\r\n          \r\n          return result;\r\n        },function(error){\r\n\r\n          return error;\r\n          \r\n        })\r\n\r\n\r\n      }catch(e){\r\n\r\n      }\r\n\r\n      return this.redirect('pricelist');\r\n\r\n\r\n   }\r\n   async productioninforAction(){\r\n\r\n\r\n    try{\r\n      let infor = this.get();\r\n      console.log(\"============[productioninforAction start]=========== \" );\r\n\r\n     // var name = encodeURIComponent(infor.name);\r\n      //var name1 = decodeURI(name)\r\n      var name = infor.name;\r\n\r\n      if(name==\"FD-Tissue-180 FD-ctDNA-180\"){\r\n\r\n        name=\"FD-Tissue-180+FD-ctDNA-180\"\r\n      }\r\n      if(name==\"FD-Tissue-600 FD-ctDNA-600\"){\r\n\r\n        name=\"FD-Tissue-600+FD-ctDNA-600\"\r\n      }\r\n      this.assign(\"name1\",name);\r\n      console.log(infor);\r\n      this.assign(\"infor\",infor);\r\n\r\n    }catch(e){\r\n\r\n\r\n    }\r\n\r\n\r\n    return this.display();\r\n   }\r\n   async updateuserAction(){\r\n    try{\r\n    let infor = this.post();\r\n    console.log(\"=====updateuserAction start=======\");\r\n    console.log(infor);\r\n      var senderId = this.cookie('userId');\r\n      //var userId = this.get('userId');\r\n      let pm = await mgr.updateUserInfor(senderId,infor,null,false,null)\r\n      .then(function(result){\r\n\r\n          return result;\r\n\r\n      },function(error){\r\n\r\n        console.log(error);\r\n\r\n      })\r\n\r\n\r\n\r\n    }catch(e){\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n      return this.redirect(\"userlist\");\r\n   }\r\n   async userinforAction(){\r\n    try{\r\n\r\n\r\n      let infor = this.get();\r\n      console.log(\"============[userinforAction]=========== \" );\r\n      console.log(infor);\r\n      this.assign(\"infor\",infor);\r\n\r\n      return this.display();\r\n\r\n\r\n\r\n    }catch(e){\r\n\r\n\r\n    }\r\n\r\n\r\n   }\r\n   async deleteuserAction(){\r\n      try{\r\n        var senderId = this.cookie('userId');\r\n        var userId = this.get('userId');\r\n      console.log(\"[userlistAction] \" + userId);\r\n      let pm  = await mgr.deleteUser(senderId,userId)\r\n    .then( function (result) { \r\n      //process.stdout.write(result);\r\n      //console.log(result.toString()); \r\n      //var ret = JSON.parse(result.toString());\r\n      \r\n      return result;\r\n    },   \r\n    function (error) {   \r\n       console.log(error);   \r\n    });\r\n    \r\n    console.log(\"========deleteuserAction start================\");\r\n    console.log(pm);\r\n    //return this.redirect('/back/userlist');\r\n    return this.redirect('/back/userlist');\r\n      \r\n    }catch(e){\r\n        return this.redirect(\"/index/index\");\r\n    }\r\n\r\n    \r\n   }\r\n   async disclistAction(){\r\n\r\n      var role = this.cookie('role');\r\n      var userId = this.cookie('userId');\r\n      if(this.isGet()&&role=='admin'){\r\n             try{\r\n        //var userId = this.cookie('userId');\r\n      console.log(\"[userlistAction] \" + userId);\r\n      let pm  = await mgm.getDiscPriceList(userId)\r\n    .then( function (result) { \r\n      //process.stdout.write(result);\r\n      //console.log(result.toString()); \r\n      //var ret = JSON.parse(result.toString());\r\n     // pm.pname = BizMgr.getPrductName(pm.productid)\r\n      return result;\r\n    },   \r\n    function (error) {   \r\n       console.log(error);   \r\n    });\r\n    console.log(\"======disclistAction pm=========\");\r\n    console.log(pm);\r\n    //判断日期\r\n     if(this.isGet()&&this.get('flag')=='true'){\r\n\r\n      console.log(\"======judge start========\");\r\n       //console.log(pm.discList);\r\n       var effactiveDate4 = new Date();\r\n       \r\n       var effactiveDate = JSON.stringify(effactiveDate4);\r\n      \r\n\r\n       var effactiveDate1 = effactiveDate.substring(1,11);\r\n       \r\n       var effactiveDate2 = effactiveDate1.split(\"-\");\r\n       \r\n       var effactiveDateTotal  = parseInt(effactiveDate2[0])*365*24*3600+parseInt(effactiveDate2[1])*24*3600+parseInt(effactiveDate2[2])*3600;\r\n       \r\n       let discList1 = new Array();\r\n       for(let j in pm.discList){\r\n        \r\n        //console.log(effactiveDate1);\r\n        var startDate1 = pm.discList[j].startDate.substring(0,10);\r\n        var endDate1 = pm.discList[j].endDate.substring(0,10);\r\n        var startDate2 = startDate1.split(\"-\");\r\n        var endDate2 = endDate1.split(\"-\");\r\n        \r\n       // console.log(startDate2[1]*24*3600);\r\n        var startDateTotal  = startDate2[0]*365*24*3600+startDate2[1]*24*3600+startDate2[2]*3600;\r\n        var endDateTotal  = endDate2[0]*365*24*3600+endDate2[1]*24*3600+endDate2[2]*3600;\r\n       // console.log(effactiveDateTotal+\"|||\"+endDateTotal);\r\n\r\n      // console.log(startDateTotal+\"|\"+endDateTotal);\r\n        if(startDateTotal<=effactiveDateTotal&&endDateTotal>=effactiveDateTotal){\r\n             discList1.push(pm.discList[j]);\r\n            //console.log(pm.discList[j].startDate);\r\n\r\n        }\r\n        // let discList2 = discList1;\r\n        \r\n\r\n       }\r\n        console.log(discList1);\r\n      this.assign('disclist',discList1);\r\n      return this.display();\r\n\r\n    }\r\n\r\n\r\n\r\n     this.assign('disclist',pm.discList);\r\n\r\n\r\n   /* \r\n    var pmstr = pm;\r\n    console.log(pmstr);\r\n   // console.log(typeof pm.userList);\r\n   // console.log(pm.userList.toString())\r\n    this.assign('userlist',pm.userList);\r\n    this.assign('pm',pm);*/\r\n    \r\n      return this.display();\r\n\r\n\r\n      \r\n    }catch(e){\r\n        return this.redirect(\"/index/index\");\r\n    }\r\n      }else{\r\n        return this.redirect(\"/index/index\");\r\n      }\r\n\r\n   \r\n\r\n   }\r\n\r\n   async pricelistAction(){\r\n      var role = this.cookie('role');\r\n      var userId = this.cookie('userId');\r\n      if(this.isGet()&&role=='admin'){\r\n     try{\r\n        \r\n      console.log(\"[userlistAction] \" + userId);\r\n      let pm  = await mgm.getTestItemList(userId)\r\n    .then( function (result) { \r\n      //process.stdout.write(result);\r\n      //console.log(result.toString()); \r\n      //var ret = JSON.parse(result.toString());\r\n      \r\n      return result;\r\n    },   \r\n    function (error) {   \r\n       console.log(error);   \r\n    });\r\n    console.log(\"======pricelistAction pm=========\");\r\n    console.log(pm);\r\n  /* for(let j in pm.itemList){\r\n      var elm = pm.userList[j];\r\n      console.log(elm.userId + \"|\" + elm.name + \"|\" + elm.password); \r\n      this.assign('elm',elm);*/\r\n      this.assign('itemlist',pm.itemList);\r\n\r\n\r\n   /* }*/\r\n   // console.log(pm);\r\n    var pmstr = pm;\r\n    console.log(pmstr);\r\n   // console.log(typeof pm.userList);\r\n   // console.log(pm.userList.toString())\r\n    this.assign('userlist',pm.userList);\r\n    this.assign('pm',pm);\r\n    //this.assign('json',\"{name:jiang,age:25}\");\r\n    return this.display();\r\n\r\n\r\n      \r\n    }catch(e){\r\n        return this.redirect(\"/index/index\");\r\n    }\r\n\r\n      }else{\r\n          return this.redirect(\"/index/index\");\r\n      }\r\n   \r\n\r\n   }\r\n\t async userlistAction(){\r\n      var role = this.cookie('role');\r\n      var userId = this.cookie('userId');\r\n      if(this.isGet()&&role=='admin'){\r\n          try{\r\n\r\n      //var userId = this.cookie('userId');\r\n      console.log(\"[userlistAction] \" + userId);\r\n      let pm  = await mgr.getUserList(userId, \"\")\r\n    .then( function (result) { \r\n      //process.stdout.write(result);\r\n      //console.log(result.toString()); \r\n      //var ret = JSON.parse(result.toString());\r\n      \r\n      return result;\r\n    },   \r\n    function (error) {   \r\n       console.log(error);   \r\n    });\r\n    \r\n    for(let j in pm.userList){\r\n      var elm = pm.userList[j];\r\n      console.log(elm.userId + \"|\" + elm.name + \"|\" + elm.password); \r\n      this.assign('elm',elm);\r\n      \r\n      this.assign('userlist',pm.userList);\r\n      \r\n    }\r\n   // console.log(pm);\r\n    var pmstr = pm;\r\n    console.log(pmstr);\r\n   // console.log(typeof pm.userList);\r\n   // console.log(pm.userList.toString())\r\n    this.assign('userlist',pm.userList);\r\n    this.assign('pm',pm);\r\n    this.assign('json',\"{name:jiang,age:25}\");\r\n      return this.display();\r\n      }catch(e){\r\n        return this.redirect(\"/index/index\");\r\n      }\r\n\r\n      }else{\r\n\r\n           return this.redirect(\"/index/index\");\r\n\r\n      }\r\n      \r\n\r\n      \r\n   }\r\n\r\n\r\n   async testAction(){\r\n\t   \r\n    console.log(\"-----------------------------------\");\r\n   \tlet infor = this.post();\r\n   \tconsole.log(\"-------start---------\");\r\n   \tconsole.log(infor);\r\n   \tvar userId1 = infor.reqReserved;\r\n   \tvar userId2 = userId1.split(\",\");\r\n   \tvar userId =userId2[0];\r\n   \tvar secToken =userId2[1];\r\n   \t//var userId = this.cookie('userId');\r\n\r\n   \tvar infor1 = JSON.stringify(infor); \r\n\r\n    //console.log(infor1.txnType);\r\n\r\n\r\n//对传过来的json重新排序\r\n   \t/*\r\n    var infor11 =\r\n    {txnType:infor.txnType,\r\n respCode:infor.respCode, \r\ncurrencyCode:infor.currencyCode, \r\nmerId:infor.merId,\r\nsettleDate:infor.settleDate, \r\ntxnSubType:infor.txnSubType, \r\nversion:infor.version, \r\ntxnAmt:infor.txnAmt, \r\nsignMethod:infor.signMethod, \r\ncertId:infor.certId, \r\nsettleAmt:infor.settleAmt, \r\nencoding:infor.encoding, \r\nsettleCurrencyCode:infor.settleCurrencyCode, \r\ntraceTime:infor.traceTime, \r\nbizType:infor.bizType,\r\n respMsg:infor.respMsg, \r\n traceNo:infor.traceNo,\r\n queryId:infor.queryId, \r\n orderId:infor.orderId,\r\n signature:infor.signature,\r\n  accessType:infor.accessType,\r\n  txnTime:infor.txnTime} \r\n\r\n   \tvar infor11 = \t\r\n    {\r\n     accessType:'0',\r\n     bizType:'000201',\r\n     certId:'69597475696',\r\n     currencyCode:'156',\r\n     encoding:'UTF-8',\r\n     merId:'898320573920750',\r\n     orderId:'20170419153547',\r\n     queryId:'201704191535478162748',\r\n     respCode:'00',\r\n     respMsg:'success',\r\n     settleAmt:'1',\r\n     settleCurrencyCode:'156',\r\n     settleDate:'0419',\r\n     signMethod:'01',\r\n     traceNo:'816274',\r\n     traceTime:'0419153547',\r\n     txnAmt:'1',\r\n     txnSubType:'01',\r\n     txnTime:'20170419153547',\r\n     txnType:'01',\r\n     version:'5.0.0',\r\n     signature:'p16MJKNPzXheCZ8/TkSwHOWIy2gB+f2ioVGRleeR9TvZXjJ+WCPxf5fdxRmrR5lUzRpHOWHLXhVe1jiLsik+K0N+UJwuWADsEobsUtm7b/wqH9G56MDc5uueIOTvh7GYaY4qTGbYdjN6UHPVf4d0BatBysX/JMDfW0iRvWHaDWJwAOJVqy7IdyhbmXe3/aXfLTb/ciqZsxEbJshdkJP0Q99E1FqqDHYp2WW3SJ4eawuLb97fyVNqymsQexzljVsdj1Fxz5g/jTW8krFmOmfvjgYLL6T28mCVGZjX1X7Cp2W+Ir37ie5rKnMV6DSnpCOZ82CsNfxaYjm7hNmO3X1oEA=='\r\n    }\r\n*/\r\n\r\n//console.log(\"=========infor11===========\");\r\n   \tconsole.log(infor);\r\n    var inforStr = JSON.stringify(infor); \r\n   \t\r\n\r\n   //\tvar test  = \"{accessType:0,bizType:000201,certId:69597475696,currencyCode:156,encoding:UTF-8,merId:898320573920750,orderId:0000000241,queryId:201703241515424211028}\"\r\n   \t//var test1 =encodeURI(test);\r\n   \tlet pm = await mgm.unionVerify(userId,'UTF-8',inforStr)\r\n   \t.then(function(result){\r\n   \t\tconsole.log(\"=======result===========\");\r\n   \t\tconsole.log(result);\r\n\r\n   \t\treturn result;\r\n   \t})\r\n   \tconsole.log(\"=======testAction pm=============\");\r\n   \tconsole.log(pm);\r\n\r\n    if(pm.errorCode==0){\r\n      //updTestInfo(senderId, secToken, testOrderId, custId, doctor, feeStatus, needRet, phone, \r\n  //recvContactInfo, reportReceiver, sendDate, sendContactInfo, senderName, sendUnit, sendTechoffice, \r\n  //testType, testStatus, itemId);\r\n\r\n     \r\n\r\n        \r\n      try{\r\n        let pm2 = mgm.unionBill(userId, 'UTF-8', inforStr)\r\n        .then(function(result){\r\n          console.log(result);\r\n        },function(error){\r\n            console.log(error);\r\n        })\r\n      }catch(e){\r\n          console.log(\"开票失败\");\r\n      }\r\n      \r\n\r\n\r\n\r\n    }\r\n   \treturn this.redirect('/report/query');\r\n   }\r\n\r\n   async backtestAction(){\r\n\r\n   \tconsole.log(\"==========backtestAction========\");\r\n\r\n    return this.display();\r\n   }\r\n  /* async testAction(){\r\n      console.log(\"==========testAction start========\");\r\n\r\n\r\n\r\n      var pm  = this.post();\r\n\r\n      console.log(pm);\r\n\r\n      \r\n    return this.display();\r\n   }*/\r\n\r\n\r\n   \r\n}\r\n"
    ]
}